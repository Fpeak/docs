import Guide from '~/components/layout/guide'
import Snippet from '~/components/snippet'
import Caption from '~/components/text/caption'
import { GenericLink } from '~/components/text/link'
import { Image } from '~/components/media'
import Note from '~/components/text/note'

export const meta = {
  title: 'Create and Deploy a Crystallize E-commerce Site with ZEIT Now',
  description:
    'How to launch an e-commerce site using Next.js and Crystallize on ZEIT Now in minutes.',
  published: '2019-10-16T12:00:00.860Z',
  authors: ['msweeneydev'],
  url: '/guides/deploying-crystallize-with-zeit-now',
  image:
    'https://og-image.now.sh/**Deploy%20Crystallize%20Sites**%20%3Cbr%2F%3E%20with%20ZEIT%20Now.png?theme=light&md=1&fontSize=100px&images=https%3A%2F%2Fassets.zeit.co%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fzeit-black-triangle.svg&images=https%3A%2F%2Fcrystallize.com%2Fstatic%2Fimages%2Flogo_crystallize_symbol.svg&widths=300&widths=350&heights=300&heights=350',
  editUrl: 'pages/guides/deploying-crystallize-with-zeit-now.mdx',
  lastEdited: '2019-10-16T21:31:27.000Z'
}

[Crystallize](https://crystallize.com/) is a super fast GraphQL based headless e-commerce service with super structured product information management.

In this guide, you will discover how to create a Crystallize e-commerce site, that uses SendGrid to send login links, and deploy it with [ZEIT Now](/now).

## Step 1: Creating a SendGrid API Key

To start, you need to have [created a SendGrid account](https://signup.sendgrid.com/). Once logged in to SendGrid, follow the setup guide steps for integrating using the Web API, choosing the Node.js option.

You will be asked to supply a name for your API key and given the option to create it.

Once created, make a note of this API key as it will not be shown again, this will be used in the app you create.

<Note>
  On occasion, it can take a few hours for the API key to become active.
</Note>

## Step 2: Set Up Your Crystallize Project

[Set up a Crystallize project](https://crystallize.com/developers) with [`npx`](https://www.npmjs.com/package/npx) and move into the project directory:

<Snippet dark text="npx @crystallize/cli my-project && cd my-project" />
<Caption>Initializing a Crystallize project with <GenericLink href="https://www.npmjs.com/package/npx">npx</GenericLink> and moving into the project directory.</Caption>

During the setup, you will be asked a series of questions that will customize the output. Select the following options:

- Teddy bear shop
- Next.js + React
- **Both** ZEIT Now and SendGrid

For the final two options, navigate using the arrow keys and use the spacebar to select them, then enter your SendGrid API key when prompted.

Create a [Now Secret](/docs/v2/serverless-functions/env-and-secrets/) to securely store the SendGrid API key, this will be used when deploying the app with ZEIT Now.

<Snippet dark text="now secrets add SENDGRID-API-KEY [your-sendgrid-api-key]" />
<Caption>
  Adding the SendGrid API key as a <strong>Now Secret</strong>.
</Caption>

## Step 3: Deploying Your Crystallize Site with ZEIT Now

With a Crystallize site set up, it is ready to deploy live with [Now](/docs/v2).

Using [Now CLI](/download), deploy your website with **a single command**:

<Snippet dark text="now" />
<Caption>Deploying your Crystallize site with Now CLI.</Caption>

If you want to deploy your Crystallize project when you push to a Git repository, you can use either [Now for GitHub](/docs/v2/integrations/now-for-github/) or [Now for GitLab](/docs/v2/integrations/now-for-gitlab/) to have your project automatically deployed on every push, and the [production domain](https://zeit.co/docs/v2/custom-domains/#adding-a-domain) updated on push to master.

export default ({ children }) => <Guide meta={meta}>{children}</Guide>

export const config = {
  amp: 'hybrid'
}
